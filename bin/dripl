#!/usr/bin/env ruby

require 'bundler/setup'
require 'liquid/boot'

def uri(value)
  @uri = value
end

def source(value)
  @source = value
end

def options(value)
  @options = value
end

begin
  driplrc = File.read(File.join(File.expand_path('..', __dir__), '.driplrc'))
rescue
  puts 'You need to create a .driplrc, take a look at dot_driplrc_example'
  exit 1
end

instance_eval(driplrc)

unless @uri
  puts 'Your .driplrc is incomplete, please fix'
  exit 1
end

require 'druid/console'
Druid::Console.new(@uri, @source, @options)
